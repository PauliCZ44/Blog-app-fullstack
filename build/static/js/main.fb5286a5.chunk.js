(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{55:function(e,t,a){e.exports=a(88)},87:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);var r,n=a(0),s=a.n(n),l=a(20),o=a.n(l),c=a(2),i=a.n(c),u=a(4),m=a(6),d=a(18),g=function(e){return s.a.createElement("div",{className:"card px-sm-4 mt-2 login-card hv-center shadow"},s.a.createElement("form",{className:"p-2"},s.a.createElement("div",{className:"form-group text-left mt-3"},s.a.createElement("label",{className:"font-weight-bold"},"Username"),s.a.createElement("input",{type:"text",value:e.username,className:"form-control",id:"username",placeholder:"Enter your user name",onChange:function(t){var a=t.target;return e.setUsername(a.value)}})),s.a.createElement("div",{className:"form-group text-left mt-4"},s.a.createElement("label",{className:"font-weight-bold"},"Password"),s.a.createElement("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",value:e.password,onChange:function(t){var a=t.target;return e.setPassword(a.value)}})),s.a.createElement("button",{id:"login-btn",type:"submit",className:"btn btn-dark my-3 px-5 submitBtn",onClick:e.handleLogin},"Login"),s.a.createElement("button",{type:"button",onClick:e.switchToRegister,className:"btn btn-info my-3 px-4 submitBtn float-right"},"Create Account")))},b=a(10),f=a(14),p={message:"",error:!1},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=1e3*t;return clearTimeout(r),function(){var t=Object(u.a)(i.a.mark((function t(s){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:"DISPLAY",message:e,error:a}),r=setTimeout((function(){s({type:"REMOVE",message:p.message,error:!1})}),n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DISPLAY":return Object(f.a)({},e,{message:t.message,error:t.error});case"REMOVE":return Object(f.a)({},e,{message:t.message,error:!1});default:return e}},v=function(e){var t=Object(b.b)(),a=Object(n.useState)([!1,!1,!1,!1]),r=Object(m.a)(a,2),l=r[0],o=r[1],c=l[0]?"form-control notFilledForm":"form-control",d=l[1]?"form-control notFilledForm":"form-control",g=l[2]?"form-control notFilledForm":"form-control",f=l[3]?"form-control notFilledForm":"form-control",p=function(){var a=Object(u.a)(i.a.mark((function a(r){var n,s;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r.preventDefault(),""!==e.username){a.next=6;break}return t(h("Please fill in your username",5,!0)),a.abrupt("return",o([!0,!1,!1,!1]));case 6:if(""!==e.name){a.next=11;break}return t(h("Please fill in your full name",5,!0)),a.abrupt("return",o([!1,!0,!1,!1]));case 11:if(""!==e.password){a.next=16;break}return t(h("Please fill in your full password",5,!0)),a.abrupt("return",o([!1,!1,!0,!1]));case 16:if(""!==e.passwordConfirm){a.next=21;break}return t(h("Please fill in your full password  password for confirmation",5,!0)),a.abrupt("return",o([!1,!1,!1,!0]));case 21:if(e.passwordConfirm===e.password){a.next=24;break}return t(h("Passwords had to be equal",5,!0)),a.abrupt("return",o([!1,!1,!0,!0]));case 24:return n={username:e.username,name:e.name,password:e.password},a.prev=25,a.next=28,e.registerService(n);case 28:(s=a.sent)&&(t(h("".concat(e.name,', you were registed in as "').concat(e.username,'"'),5)),e.setUsername(""),e.setName(""),e.setPassword(""),e.setPasswordConfirm(""),o([!1,!1,!1,!1]),console.log("response after create:",s)),a.next=36;break;case 32:a.prev=32,a.t0=a.catch(25),t(h("".concat(e.name,', you were registed in as "').concat(e.username,'"'),5,!0)),console.log("error::",a.t0);case 36:case"end":return a.stop()}}),a,null,[[25,32]])})));return function(e){return a.apply(this,arguments)}}();return s.a.createElement("div",{className:"card px-sm-4 mt-2 login-card hv-center shadow"},s.a.createElement("form",{className:"p-2"},s.a.createElement("div",{className:"form-group text-left mt-3"},s.a.createElement("label",{className:"font-weight-bold"},"Username for login"),s.a.createElement("input",{type:"text",value:e.username,className:c,id:"username",placeholder:"Enter your username",onChange:function(t){var a=t.target;return e.setUsername(a.value)}})),s.a.createElement("div",{className:"form-group text-left mt-3"},s.a.createElement("label",{className:"font-weight-bold"},"Name"),s.a.createElement("input",{type:"text",value:e.name,className:d,id:"name",placeholder:"Enter your name",onChange:function(t){var a=t.target;return e.setName(a.value)}})),s.a.createElement("div",{className:"form-group text-left mt-4"},s.a.createElement("label",{className:"font-weight-bold"},"Password"),s.a.createElement("input",{type:"password",className:g,id:"password",placeholder:"Password",value:e.password,onChange:function(t){var a=t.target;return e.setPassword(a.value)}})),s.a.createElement("div",{className:"form-group text-left mt-4"},s.a.createElement("label",{className:"font-weight-bold"},"Confirm your password"),s.a.createElement("input",{type:"password",className:f,id:"passwordConfirm",placeholder:"Confirm your password",value:e.passwordConfirm,onChange:function(t){var a=t.target;return e.setPasswordConfirm(a.value)}})),s.a.createElement("button",{type:"submit",className:"btn btn-block btn-dark my-5 px-5 py-3 submitBtn",onClick:p},"CREATE NEW ACCOUNT"),s.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},s.a.createElement("p",{className:"my-2"}," Already have an account?"),s.a.createElement("button",{className:"btn btn-info my-2 px-5 save-btn",type:"button",onClick:e.switchToRegister},"Log in here"))))},k=a(16),w=a.n(k),N="/api/blogs",O=null;var y=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:O}},e.next=3,w.a.post(N,t,a);case 3:return r=e.sent,console.log(r.data),e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:O}},r=N+"/"+t.id,e.next=4,w.a.delete(r,a);case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L={getAll:function(){return w.a.get(N).then((function(e){return e.data}))},setToken:function(e){O="bearer ".concat(e)},create:y,put:function(){var e=Object(u.a)(i.a.mark((function e(t){var a,r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=N+"/"+t.id,r={headers:{Authorization:O}},e.next=4,w.a.put(a,t,r);case 4:return n=e.sent,console.log("Put METHDON, data:",n.data),e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteBlog:x,getOne:function(){var e=Object(u.a)(i.a.mark((function e(t){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=N+"/"+t.id,e.next=3,w.a.get(a);case 3:return r=e.sent,console.log(r.data),e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},j=[].map((function(e){return{content:e,url:"action.data.url",author:"action.data.author",id:(1e5*Math.random()).toFixed(0),votes:0}})).sort((function(e,t){return t.votes-e.votes})),B={blogs:Object(d.a)(j)},A=function(e,t){return console.log("CREATE"),function(){var a=Object(u.a)(i.a.mark((function a(r){var n;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,L.create(e);case 2:return n=a.sent,r({type:"CREATE",data:n,username:t}),console.log(n,"result from reducer"),a.abrupt("return",n);case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},T=function(e){return console.log("LIKE BLOG ACTION"),function(){var t=Object(u.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"LIKE",id:e.id}),t.next=3,L.put(e);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},C=function(e){return function(){var t=Object(u.a)(i.a.mark((function t(a){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.deleteBlog(e);case 2:return r=t.sent,a({type:"DELETE",id:e.id}),console.log(e.id,"result from reducer deleting"),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(console.log("state now: ",e),console.log("action",t),t.type){case"INITIALIZE":return Object(f.a)({},e,{blogs:Object(d.a)(t.blogs)});case"CREATE":var a={title:t.data.title,url:t.data.url,author:t.data.author,id:t.data.id,likes:0,user:{username:t.username}};return Object(f.a)({},e,{blogs:e.blogs.concat(a)});case"LIKE":var r=e.blogs.find((function(e){return e.id===t.id}));return r.likes+=1,Object(f.a)({},e,{blogs:Object(d.a)(e.blogs.map((function(e){return e.id===t.id?r:e})).sort((function(e,t){return t.likes-e.likes})))});case"DELETE":return console.log("DELeTE ACTION",t),Object(f.a)({},e,{blogs:Object(d.a)(e.blogs.filter((function(e){return e.id!==t.id})))});default:return e}},U=function(e){var t=e.toggleAddNewBlog,a=e.username,r=Object(b.b)(),l=Object(n.useState)(""),o=Object(m.a)(l,2),c=o[0],d=o[1],g=Object(n.useState)(""),f=Object(m.a)(g,2),p=f[0],E=f[1],v=Object(n.useState)(""),k=Object(m.a)(v,2),w=k[0],N=k[1],O=Object(n.useState)([!1,!1,!1]),y=Object(m.a)(O,2),x=y[0],L=y[1],j=x[0]?"form-control notFilledForm":"form-control",B=x[1]?"form-control notFilledForm":"form-control",T=x[2]?"form-control notFilledForm":"form-control",C=function(){var e=Object(u.a)(i.a.mark((function e(n){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),""!==c){e.next=7;break}return r(h("Please fill in the Title",4,!0)),L([!0,!1,!1]),e.abrupt("return");case 7:if(""!==p){e.next=13;break}return r(h("Please fill in the Author",4,!0)),L([!1,!0,!1]),e.abrupt("return");case 13:if(""!==w){e.next=17;break}return r(h("Please fill in the URL",4,!0)),L([!1,!1,!0]),e.abrupt("return");case 17:s={title:c,author:p,url:w};try{r(A(s,a)).then((function(e){console.log("dispatchCreate result",e),r(h('Blog "'.concat(c,'" was added'),4,!1)),d(""),E(""),N(""),L(!1,!1,!1),t()}))}catch(l){r(h("ERROR - Blog was not added",4,!0)),console.log("error::",l)}case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement("div",{className:"card px-3 mt-2 mb-5 addBlog-card hv-center shadow-lg addBlog-panel"},s.a.createElement("h3",{className:"text-center py-3"},"Add blog:"),s.a.createElement("form",{onSubmit:C},s.a.createElement("div",{className:"form-group row"},s.a.createElement("label",{htmlFor:"inputTitle",className:"col-sm-3 col-md-2 col-form-label font-weight-bold pl-sm-4"},"Title*:"),s.a.createElement("div",{className:"col-sm-9 col-md-10 pr-sm-4"},s.a.createElement("input",{type:"text",className:j,id:"inputTitle",placeholder:"Enter title",value:c,onChange:function(e){var t=e.target;return d(t.value)}}))),s.a.createElement("div",{className:"form-group row"},s.a.createElement("label",{htmlFor:"inputAuthor",className:"col-sm-3 col-md-2 col-form-label font-weight-bold  pl-sm-4"},"Author*:"),s.a.createElement("div",{className:"col-sm-9 col-md-10 pr-sm-4"},s.a.createElement("input",{type:"text",className:B,id:"inputAuthor",placeholder:"Enter author",value:p,onChange:function(e){var t=e.target;return E(t.value)}}))),s.a.createElement("div",{className:"form-group row"},s.a.createElement("label",{htmlFor:"inputURL",className:"col-sm-3 col-md-2 col-form-label font-weight-bold  pl-sm-4"},"URL*:"),s.a.createElement("div",{className:"col-sm-9 col-md-10 pr-sm-4"},s.a.createElement("input",{type:"text",className:T,id:"inputURL",placeholder:"Enter URL",value:w,onChange:function(e){var t=e.target;return N(t.value)}}),s.a.createElement("small",{id:"help",className:"form-text text-muted"},"* must be provided"))),s.a.createElement("div",{className:"form-group row"},s.a.createElement("div",{className:"col-sm-10"},s.a.createElement("button",{id:"saveBlogBtn",type:"submit",className:"btn btn-info px-5 save-btn mr-4 mb-2",onClick:C},"Save"),s.a.createElement("button",{type:"button",className:"btn btn-danger px-5 cancel-btn mb-2 ",onClick:t},"Cancel")))))},I=a(7),R=a(92),P=function(e){var t=e.blog,a=e.user,r=e.likes,l=Object(b.b)(),o=Object(n.useState)(!1),c=Object(m.a)(o,2),d=c[0],g=c[1],f=Object(n.useState)(!1),p=Object(m.a)(f,2),E=p[0],v=p[1],k=function(){var e=Object(u.a)(i.a.mark((function e(a){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("deleting blog"),a.preventDefault(),r=t,window.confirm('Do you really want to delete "'.concat(r.title,'" from your phonebook?'))?(l(C(r)),l(h("Blog was deleted!",5,!1))):l(h("Blog was NOT deleted!",5,!0));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(i.a.mark((function e(a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),n={id:t.id,user:t.user,author:t.author,likes:r+1,title:t.title,url:t.url},l(T(n)),l(h("You liked blog ".concat(t.title," by ").concat(t.author),5,!1)),console.log("like given"),v(!0),setTimeout((function(){v(!1)}),30);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N="/blogs/"+t.id;return s.a.createElement("div",{className:"border-left border-top  bg-white rounded my-4 blogHeader"},s.a.createElement("div",{className:"bigLeftBorder border-dark ml-0 pl-2 py-2"},s.a.createElement("div",{className:"d-flex"},s.a.createElement("h5",{className:"py-1 mb-2"}," ",s.a.createElement(I.b,{to:N},t.title),s.a.createElement("span",{className:"text-muted"}," by ",t.author," ")),s.a.createElement("button",{className:"btn btn-sm btn-info px-2 px-sm-4 py-1 ml-auto mr-1 mr-sm-3 align-self-center t_DetailsBtn",onClick:function(){g(!d),console.log("toggle details")}},d?"Hide details":"Show details")),d?s.a.createElement("div",{className:"t_detailsDiv"},s.a.createElement("p",{className:"mb-1"},"URL: ",s.a.createElement("a",{href:t.url},t.url)),s.a.createElement("p",{className:"mb-1 t_likesCount"},"Likes: ",r,s.a.createElement("button",{onClick:w,className:"btn btn-sm btn-secondary py-0 px-3 ml-4 font-weight-bold t_LikeBtn",disabled:E},"Like",s.a.createElement(R.a,{size:18,className:"ml-1  font-weight-bold"}))),s.a.createElement("p",{className:"mb-1"},"User: ",t.user.username),t.user.username===a.username||"string"===typeof t.user?s.a.createElement("button",{className:"btn btn-sm btn-danger px-2 px-sm-4 py-1 t_DelBtn",onClick:k},"DELETE"):s.a.createElement("p",null,"You can not delete this blog. This was created by ",t.user.username)):null))},F=function(e){var t,a=e.screen,r=Object(b.c)((function(e){return e.notif.message})),n=Object(b.c)((function(e){return e.notif.error}));return t="login"===a?"login-notif":"add-blog-notif",null===r?null:s.a.createElement("div",{className:t,style:n?{color:"red",borderLeft:"solid 3px rgb(255, 0, 0)"}:{color:"green",borderLeft:"solid 3px #008000bb"},id:"messageComp"},r)},D=function(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),r=a[0],l=a[1],o={display:r?"none":""},c={display:r?"":"none"},i=function(){l(!r)};return s.a.createElement("div",null,s.a.createElement("div",{style:o},s.a.createElement("button",{onClick:i,className:"btn btn-md btn-light btn-block py-2 px-3 border border-dark logout-btn"},"Show ",e.buttonLabel)),s.a.createElement("div",{style:c},s.a.createElement("button",{onClick:i,className:"btn btn-light py-2 px-3 btn-block logout-btn"},"Hide ",e.buttonLabel),e.children))},G=function(e){var t=e.registeredUsers.sort((function(e,t){return t.blogs.length-e.blogs.length})).map((function(e){var t=e.blogs.reduce((function(e,t){return e+t.likes}),0),a="/users/".concat(e.id);return s.a.createElement("p",{key:e.id}," ",s.a.createElement(I.b,{to:a},e.username)," (",s.a.createElement("em",null,e.blogs.length)," blogs; ",s.a.createElement("em",null,t)," total likes) ")})),a=e.registeredUsers.filter((function(e){return 0!==e.blogs.length})).sort((function(e,t){return t.blogs.length-e.blogs.length})).map((function(e){var t=e.blogs.reduce((function(e,t){return e+t.likes}),0);return s.a.createElement("li",{key:e.id}," ",s.a.createElement("strong",null,e.username)," (",s.a.createElement("em",null,e.blogs.length)," blogs; ",s.a.createElement("em",null,t)," total likes) ")}));return s.a.createElement("div",{className:"container grid-stats-area mt-3"},s.a.createElement("div",{className:"grid-stats-a"},s.a.createElement(D,{buttonLabel:"Info about registered users and blogs:"},s.a.createElement("ul",{className:"mt-2"},t))),s.a.createElement("div",{className:"grid-stats-b"},s.a.createElement(D,{buttonLabel:"Users with at least one blog:"},s.a.createElement("ul",{className:"mt-2"},a))),s.a.createElement("div",{className:"grid-stats-c"},s.a.createElement(D,{buttonLabel:"additional info:"},s.a.createElement("h5",{className:"mt-2"},"Author with most likes is:"),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("strong",null,e.stats.mostLikesUser)," with ",e.stats.mostLikes," likes total, on his/her ",s.a.createElement("em",null,e.stats.mostLikesNumberOfBlogs)," blogs. That is, on average ",Math.round(e.stats.mostLikedBlogLikes/e.stats.mostLikesNumberOfBlogs*1e3)/1e3," likes per blog.")),s.a.createElement("h5",null,"The most liked blog is:"),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("strong",null,'"',e.stats.mostLikedBlogTitle,'"')," ",s.a.createElement("em",null,"by ",e.stats.mostlikedBlogUser)," with ",e.stats.mostLikedBlogLikes," likes.")),s.a.createElement("h5",null,"Author with most blogs is:"),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("strong",null,'"',e.stats.mostBlogs.Author,'"')," with totaly ",s.a.createElement("em",null,e.stats.mostBlogs.blogs)," blogs. On all of his blogs he has ",s.a.createElement("em",null,e.stats.mostBlogs.likes)," likes. That is, on average ",Math.round(e.stats.mostBlogs.likes/e.stats.mostBlogs.blogs*1e3)/1e3," likes per blog.")))))},M={login:function(){var e=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("/api/login",t);case 2:return a=e.sent,console.log(a),e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},_={register:function(){var e=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("/api/users",t);case 2:return a=e.sent,console.log(a),e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},z=function(){return s.a.createElement("footer",{className:"footer-copyright page-footer align-items-center d-flex"},s.a.createElement("div",{className:"container text-center justify-content-center"},"\xa9 2020 Pavel \u0160\u0165astn\xfd   ",s.a.createElement("a",{id:"info",className:"footerText",href:"https://paulicz44.github.io/stastnypavel.github.io/index.html"},"If you find a bug, please contact me."),s.a.createElement("a",{href:"https://www.linkedin.com/in/pavel-stastny-155539150",target:"blank",className:"footerText right"},"LinkedIn"),s.a.createElement("a",{href:"https://www.freecodecamp.org/paulicz44",target:"blank",className:"footerText right"},"FCC profile "),s.a.createElement("a",{href:"https://paulicz44.github.io/stastnypavel.github.io/index.html",target:"blank",className:"footerText right"},"My Github"),s.a.createElement("br",null)))},W=a(93),Y=a(94),H=function(e){var t={paddingRight:30,color:"deepskyblue"};return s.a.createElement(s.a.Fragment,null,s.a.createElement("nav",null,s.a.createElement(W.a,{collapseOnSelect:!0,expand:"sm",bg:"transparent",variant:"dark"},s.a.createElement(W.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),s.a.createElement(W.a.Collapse,{id:"responsive-navbar-nav"},s.a.createElement(Y.a,{className:"mr-auto"},s.a.createElement(Y.a.Link,{href:"#",as:"span"},s.a.createElement(I.b,{to:"/users",style:t},"USERS")),s.a.createElement(Y.a.Link,{href:"#",as:"span"},s.a.createElement(I.b,{to:"/blogs",style:t},"BLOGS")))))))},J=function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement("section",{className:"container"},s.a.createElement("h2",{className:"text-center"},"Information about registered users"),s.a.createElement("ul",{className:"mt-5"},e.registeredUsers.map((function(e){var t="/users/".concat(e.id);return s.a.createElement("li",{key:e.id}," ",s.a.createElement(I.b,{to:t}," ",e.username," ")," with ",e.blogs.length," blogs ")}))),s.a.createElement("h5",{className:"mt-5"},"Author with most likes is:"),s.a.createElement("ul",{className:"mt-3"},s.a.createElement("li",null,s.a.createElement("strong",null,e.stats.mostLikesUser)," with ",e.stats.mostLikes," likes total, on his/her ",s.a.createElement("em",null,e.stats.mostLikesNumberOfBlogs)," blogs. That is, on average ",Math.round(e.stats.mostLikedBlogLikes/e.stats.mostLikesNumberOfBlogs*1e3)/1e3," likes per blog.")),s.a.createElement("h5",{className:"mt-5"},"The most liked blog is:"),s.a.createElement("ul",{className:"mt-3"},s.a.createElement("li",null,s.a.createElement("strong",null,'"',e.stats.mostLikedBlogTitle,'"')," ",s.a.createElement("em",null,"by ",e.stats.mostlikedBlogUser)," with ",e.stats.mostLikedBlogLikes," likes.")),s.a.createElement("h5",{className:"mt-5"},"Author with most blogs is:"),s.a.createElement("ul",{className:"mt-3"},s.a.createElement("li",null,s.a.createElement("strong",null,'"',e.stats.mostBlogs.Author,'"')," with totaly ",s.a.createElement("em",null,e.stats.mostBlogs.blogs)," blogs. On all of his blogs he has ",s.a.createElement("em",null,e.stats.mostBlogs.likes)," likes. That is, on average ",Math.round(e.stats.mostBlogs.likes/e.stats.mostBlogs.blogs*1e3)/1e3," likes per blog."))))},K=a(5),V=function(e){var t=Object(K.f)("/users/:id");console.log("match:",t);var a=t?e.registeredUsers.find((function(e){return e.id===t.params.id})):null;if(console.log(a),!a)return s.a.createElement("div",null,s.a.createElement(I.b,{to:"/"},"Bo back to main page"));var r=e.registeredUsers.filter((function(e){return e.id===a.id})).map((function(e){var t=e.blogs.reduce((function(e,t){return e+t.likes}),0);"/users/".concat(e.id);return s.a.createElement("p",{key:e.id,className:"mt-2 text-center"}," (",s.a.createElement("em",null,e.blogs.length)," blogs; ",s.a.createElement("em",null,t)," total likes) ")})),n=a.blogs.map((function(e){return s.a.createElement("li",{key:e.id}," ",s.a.createElement("strong",null," ",e.title)," by ",e.author," with ",e.likes," likes.")}));return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"container"},s.a.createElement("h3",{className:"text-center"},a.username),s.a.createElement("div",{className:"mt-3"},r,s.a.createElement("h5",null,"List of blogs that was uploaded by ",a.username,":"),s.a.createElement("ul",null,n),s.a.createElement(I.b,{to:"/users"},"\u2190 Go back to page with all users"))))},Z=function(e){var t=Object(K.f)("/blogs/:id");console.log("match:",t);var a=t?e.blogs.find((function(e){return e.id===t.params.id})):null;return console.log(a),a?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"container"},s.a.createElement("h2",{className:"text-center"},a.title),s.a.createElement("div",{className:"mt-3"},s.a.createElement("p",null,"URL: ",a.url),s.a.createElement("p",null,"Likes: ",a.likes),s.a.createElement("p",null,"Aded by: ",a.user.username)),s.a.createElement(I.b,{to:"/blogs"},"Go back to page with all blogs"))):s.a.createElement("p",null,"Error")},q=function(){return w.a.get("/api/users").then((function(e){return e.data}))},Q={users:[],loggedUser:""},X=function(e){return function(){var t=Object(u.a)(i.a.mark((function t(a){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M.login({username:e.username,password:e.password});case 2:r=t.sent,L.setToken(r.token),window.localStorage.setItem("loggedBlogAppUser",JSON.stringify(r)),a({type:"LOGIN",data:r.username}),console.log("ACTION LOGIN");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USERS":return Object(f.a)({},e,{users:Object(d.a)(t.users)});case"LOGIN":return Object(f.a)({},e,{loggedUser:t.data});case"LOGOUT":return Object(f.a)({},e,{loggedUser:""});case"SET_FROM_LOCAL_STORAGE":return Object(f.a)({},e,{loggedUser:t.data});default:return e}},ee=(a(87),function(){var e=Object(b.b)(),t=Object(n.useState)(""),a=Object(m.a)(t,2),r=a[0],l=a[1],o=Object(n.useState)(null),c=Object(m.a)(o,2),f=c[0],p=c[1],E=Object(n.useState)(""),k=Object(m.a)(E,2),w=k[0],N=k[1],O=Object(n.useState)(""),y=Object(m.a)(O,2),x=y[0],j=y[1],B=Object(n.useState)(""),A=Object(m.a)(B,2),T=A[0],C=A[1],S=Object(n.useState)(!1),I=Object(m.a)(S,2),R=I[0],D=I[1],W=Object(n.useState)(!1),Y=Object(m.a)(W,2),Q=Y[0],$=Y[1],ee=Object(n.useState)({mostLikes:0,mostLikesUser:"",mostLikedBlogTitle:"",mostlikedBlogUser:"",mostLikedBlogLikes:0,mostBlogs:"",mostLikesNumberOfBlogs:0}),te=Object(m.a)(ee,2),ae=te[0],re=te[1];Object(n.useEffect)((function(){e(function(){var e=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getAll();case 2:a=e.sent,t({type:"INITIALIZE",blogs:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:a=e.sent,t({type:"INIT_USERS",users:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),console.log("blog and users should init")}),[e]);var ne=Object(b.c)((function(e){return e.blogs.blogs})),se=Object(b.c)((function(e){return e.users.users}));console.log("rUsers",se),Object(n.useEffect)((function(){var t,a=window.localStorage.getItem("loggedBlogAppUser");if(a){var r=JSON.parse(a);e((t=r,L.setToken(t.token),{type:"SET_FROM_LOCAL_STORAGE",data:t.username})),p(r)}else console.log("Local storage empty, you have to login to app")}),[e]);var le=function(){D(!R)},oe={display:R?"":"none"},ce=function(){var t=Object(u.a)(i.a.mark((function t(a){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,M.login({username:r,password:w});case 4:n=t.sent,p(n),e(X({username:r,password:w})),l(""),N(""),e(h("You were logged in",5)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0),e(h("Wrong credentials",5,!0));case 16:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}(),ie=function(e){e.preventDefault(),N(""),$(!Q)};return Object(n.useEffect)((function(){var e=function(e){if(Array.isArray(e)&&0!==e.length){var t={},a=[];e.forEach((function(e){if(-1===a.findIndex((function(t){return t.Author===e.author})))a.push({Author:e.author,likes:e.likes,numberOfBlogs:1});else{var t=a.findIndex((function(t){return t.Author===e.author}));a[t].likes+=e.likes,a[t].numberOfBlogs++}}));var r=Math.max.apply(Math,Object(d.a)(a.map((function(e){return e.likes}))).concat([0]));return a.forEach((function(){var e=a.findIndex((function(e){return e.likes===r}));e>-1&&(t=a[e])})),t}return{Author:"none",numberOfBlogs:0,likes:0}}(ne),t=function(e){var t={title:"",author:"",likes:0};return Array.isArray(e)&&0!==e.length?(e.forEach((function(e){e.likes>t.likes&&(t={title:e.title,author:e.author,likes:e.likes})})),t):t}(ne),a=function(e){if(Array.isArray(e)&&0!==e.length){var t=[],a={};e.forEach((function(e){if(-1===t.findIndex((function(t){return t.Author===e.author})))t.push({Author:e.author,blogs:1,likes:e.likes});else{var a=t.findIndex((function(t){return t.Author===e.author}));t[a].blogs++,t[a].likes+=e.likes}}));var r=Math.max.apply(Math,Object(d.a)(t.map((function(e){return e.blogs}))).concat([0]));return t.forEach((function(){var e=t.findIndex((function(e){return e.blogs===r}));e>-1&&(a=t[e])})),a}return{Author:"none",blogs:0,likes:0}}(ne);re({mostLikes:e.likes,mostLikesUser:e.Author,mostLikesNumberOfBlogs:e.numberOfBlogs,mostLikedBlogTitle:t.title,mostlikedBlogUser:t.author,mostLikedBlogLikes:t.likes,mostBlogs:a})}),[ne]),null===f&&!1===Q?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"container"},s.a.createElement("h1",{className:"text-center my-5"},"BLOGS APP"),s.a.createElement("h5",{className:"text-center m-4"},"Log in to application please"),s.a.createElement("div",{className:"wrapNotif"},s.a.createElement(F,{screen:"login"})),s.a.createElement(g,{handleLogin:ce,username:r,setUsername:l,password:w,setPassword:N,switchToRegister:ie}))):null===f&&!0===Q?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"container"},s.a.createElement("h1",{className:"text-center my-5"},"BLOGS APP"),s.a.createElement("h5",{className:"text-center m-4"},"Register to application"),s.a.createElement("div",{className:"wrapNotif"},s.a.createElement(F,{screen:"login"})),s.a.createElement(v,{username:r,setUsername:l,password:w,setPassword:N,passwordConfirm:x,setName:C,name:T,setPasswordConfirm:j,switchToRegister:ie,registerService:_.register}))):s.a.createElement(s.a.Fragment,null,s.a.createElement("main",{className:"main-app"},s.a.createElement("header",{className:"bg-black pt-5 pb-2 mb-5"},s.a.createElement("h1",{className:"text-center text-light"},"BLOGS APP"),s.a.createElement("div",{className:"container"},s.a.createElement("p",{className:"text-right text-white-50"},"Logged as ",f.username,". Welcome back!",s.a.createElement("button",{onClick:function(){console.log("logging out"),e(function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOGOUT"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p(null),window.localStorage.removeItem("loggedBlogAppUser"),e(h("You were logged out",5,!0))},className:"btn btn-dark btn-sm px-4 ml-4 logout-btn"},"Log Out")),s.a.createElement(H,null))),s.a.createElement(K.c,null,s.a.createElement(K.a,{exact:!0,path:"/users"},s.a.createElement(J,{stats:ae,blogs:ne,registeredUsers:se})),s.a.createElement(K.a,{path:"/users/:id"},s.a.createElement(V,{user:f,stats:ae,blogs:ne,registeredUsers:se})),s.a.createElement(K.a,{path:"/blogs/:id"},s.a.createElement(Z,{user:f,stats:ae,blogs:ne,registeredUsers:se})),s.a.createElement(K.a,{path:"/"},s.a.createElement("section",{className:"container appWrapper"},s.a.createElement("div",{className:"wrapNotif"},s.a.createElement(F,{screen:"blogList"})),s.a.createElement("button",{onClick:le,className:"btn btn-block btn-dark addBlog-card p-3 my-3 mb-5 addBlog-Btn"},"CREATE A NEW BLOG"),s.a.createElement("div",{style:oe},s.a.createElement(U,{blogs:ne,toggleAddNewBlog:le,user:f,blogServiceCreate:L.create,blogServiceGetOne:L.getOne,username:f.username})),s.a.createElement("section",{className:"blogSection"},s.a.createElement("h3",{className:"font-weight-bolder"},"Saved blogs:"),s.a.createElement("div",{className:"line"}),ne.sort((function(e,t){return t.likes-e.likes})).map((function(e){return s.a.createElement(P,{key:e.id,blog:e,user:f,likes:e.likes})})))),s.a.createElement(G,{stats:ae,blogs:ne,registeredUsers:se})))),s.a.createElement(z,null))}),te=a(23),ae=a(53),re=a(54),ne=Object(te.combineReducers)({blogs:S,notif:E,users:$}),se=Object(te.createStore)(ne,Object(ae.composeWithDevTools)(Object(te.applyMiddleware)(re.a)));o.a.render(s.a.createElement(I.a,null,s.a.createElement(b.a,{store:se},s.a.createElement(ee,null))),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.fb5286a5.chunk.js.map